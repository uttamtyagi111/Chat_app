<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Agent Chat Interface</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            overflow: hidden;
        }

        .main-container {
            display: flex;
            height: 100vh;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            margin: 10px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        /* Sidebar */
        .sidebar {
            width: 320px;
            background: linear-gradient(180deg, #2c3e50 0%, #34495e 100%);
            color: white;
            display: flex;
            flex-direction: column;
            border-radius: 20px 0 0 20px;
        }

        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(0, 0, 0, 0.2);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
        }

        .logo img {
            width: 40px;
            height: 40px;
            border-radius: 8px;
        }

        .logo h2 {
            font-size: 18px;
            font-weight: 600;
        }

        .search-box {
            position: relative;
            margin-top: 15px;
        }

        .search-box input {
            width: 100%;
            padding: 12px 40px 12px 16px;
            border: none;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 14px;
        }

        .search-box input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .search-box i {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(255, 255, 255, 0.6);
        }

        .sidebar-tabs {
            display: flex;
            padding: 20px 20px 0;
            gap: 5px;
        }

        .tab-btn {
            flex: 1;
            padding: 10px;
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            cursor: pointer;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .tab-btn.active {
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }

        .sidebar-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }

        .contact-item, .inbox-item {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-bottom: 8px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .contact-item:hover, .inbox-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }

        .contact-item.active, .inbox-item.active {
            background: rgba(74, 144, 226, 0.3);
            border-left: 4px solid #4a90e2;
        }

        .avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(45deg, #4a90e2, #357abd);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            margin-right: 12px;
            font-size: 16px;
        }

        .contact-info {
            flex: 1;
            min-width: 0;
        }

        .contact-name {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .contact-status {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.6);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .status-online { background: #2ecc71; }
        .status-away { background: #f39c12; }
        .status-offline { background: #95a5a6; }

        .unread-badge {
            position: absolute;
            top: 8px;
            right: 12px;
            background: #e74c3c;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: 600;
        }

        /* Main Chat Area */
        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: white;
        }

        .chat-header {
            padding: 20px 25px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
        }

        .chat-user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .chat-user-info .avatar {
            width: 50px;
            height: 50px;
            font-size: 18px;
        }

        .chat-user-details h3 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .chat-user-details p {
            font-size: 14px;
            opacity: 0.8;
        }

        .chat-actions {
            display: flex;
            gap: 15px;
        }

        .action-btn {
            width: 40px;
            height: 40px;
            border: none;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .action-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .chat-messages {
            flex: 1;
            padding: 25px;
            overflow-y: auto;
            background: #f8f9fa;
            background-image: 
                radial-gradient(circle at 25px 25px, rgba(255,255,255,0.2) 2px, transparent 0),
                radial-gradient(circle at 75px 75px, rgba(255,255,255,0.2) 2px, transparent 0);
            background-size: 100px 100px;
        }

        .message {
            display: flex;
            margin-bottom: 20px;
            animation: messageSlide 0.4s ease-out;
        }

        @keyframes messageSlide {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.sent {
            justify-content: flex-end;
        }

        .message-content {
            max-width: 70%;
            padding: 15px 20px;
            border-radius: 20px;
            position: relative;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .message.received .message-content {
            background: white;
            border-bottom-left-radius: 5px;
        }

        .message.sent .message-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-bottom-right-radius: 5px;
        }

        .message-text {
            font-size: 15px;
            line-height: 1.4;
            margin-bottom: 8px;
        }

        .message-time {
            font-size: 12px;
            opacity: 0.7;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .typing-indicator {
            display: none;
            padding: 15px 0;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
            padding: 15px 20px;
            background: white;
            border-radius: 20px;
            border-bottom-left-radius: 5px;
            max-width: fit-content;
        }

        .typing-dots span {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #bbb;
            animation: typing 1.4s infinite;
        }

        .typing-dots span:nth-child(2) { animation-delay: 0.2s; }
        .typing-dots span:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }

        /* Input Area */
        .input-container {
            padding: 20px 25px;
            background: white;
            border-top: 1px solid #e9ecef;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .input-wrapper {
            flex: 1;
            position: relative;
            background: #f8f9fa;
            border-radius: 25px;
            padding: 5px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .input-actions {
            display: flex;
            gap: 8px;
            padding-left: 15px;
        }

        .input-btn {
            width: 35px;
            height: 35px;
            border: none;
            background: transparent;
            color: #6c757d;
            cursor: pointer;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .input-btn:hover {
            background: #e9ecef;
            color: #495057;
        }

        #message-input {
            flex: 1;
            border: none;
            outline: none;
            padding: 15px 20px;
            font-size: 15px;
            background: transparent;
            resize: none;
            max-height: 120px;
            min-height: 50px;
        }

        .send-btn {
            width: 50px;
            height: 50px;
            border: none;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            margin-right: 5px;
        }

        .send-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        /* Right Panel */
        .right-panel {
            width: 350px;
            background: #f8f9fa;
            border-left: 1px solid #e9ecef;
            display: flex;
            flex-direction: column;
            border-radius: 0 20px 20px 0;
        }

        .panel-tabs {
            display: flex;
            background: white;
            border-bottom: 1px solid #e9ecef;
        }

        .panel-tab {
            flex: 1;
            padding: 15px;
            background: transparent;
            border: none;
            cursor: pointer;
            font-size: 14px;
            color: #6c757d;
            transition: all 0.3s ease;
        }

        .panel-tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .panel-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        /* Tags */
        .tag-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 15px;
            margin-bottom: 8px;
            background: white;
            border-radius: 10px;
            border-left: 4px solid #4a90e2;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .tag-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .tag-color {
            width: 16px;
            height: 16px;
            border-radius: 50%;
        }

        .tag-actions {
            display: flex;
            gap: 8px;
        }

        .tag-btn {
            width: 30px;
            height: 30px;
            border: none;
            border-radius: 6px;
            background: #f8f9fa;
            color: #6c757d;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .tag-btn:hover {
            background: #e9ecef;
        }

        /* Shortcuts */
        .shortcut-item {
            background: white;
            padding: 15px;
            margin-bottom: 12px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .shortcut-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .shortcut-title {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 8px;
            color: #2c3e50;
        }

        .shortcut-text {
            font-size: 13px;
            color: #6c757d;
            line-height: 1.4;
        }

        .shortcut-key {
            background: #e9ecef;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 11px;
            color: #495057;
            margin-top: 8px;
            display: inline-block;
        }

        /* Triggers */
        .trigger-item {
            background: white;
            padding: 15px;
            margin-bottom: 12px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            border-left: 4px solid #28a745;
        }

        .trigger-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .trigger-title {
            font-weight: 600;
            font-size: 14px;
            color: #2c3e50;
        }

        .trigger-toggle {
            width: 40px;
            height: 20px;
            background: #28a745;
            border-radius: 10px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .trigger-toggle::after {
            content: '';
            width: 16px;
            height: 16px;
            background: white;
            border-radius: 50%;
            position: absolute;
            top: 2px;
            right: 2px;
            transition: all 0.3s ease;
        }

        .trigger-toggle.off {
            background: #6c757d;
        }

        .trigger-toggle.off::after {
            right: 22px;
        }

        .trigger-condition {
            font-size: 12px;
            color: #6c757d;
            margin-bottom: 5px;
        }

        .trigger-action {
            font-size: 13px;
            color: #495057;
        }

        /* Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 15px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 20px;
            font-weight: 600;
            color: #2c3e50;
        }

        .close-btn {
            width: 35px;
            height: 35px;
            border: none;
            border-radius: 50%;
            background: #f8f9fa;
            color: #6c757d;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: #e9ecef;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }

        .form-input, .form-textarea, .form-select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-input:focus, .form-textarea:focus, .form-select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            margin-right: 10px;
            transition: all 0.3s ease;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        /* Add buttons */
        .add-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border: none;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
            transition: all 0.3s ease;
            z-index: 100;
        }

        .add-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 35px rgba(102, 126, 234, 0.6);
        }
        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e9ecef;
        }

        .section-header h3 {
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
        }

        .add-item-btn {
            width: 35px;
            height: 35px;
            border: none;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .add-item-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .panel-section {
            display: none;
        }

        .panel-section.active {
            display: block;
        }

        .modal-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid #e9ecef;
        }

        .applied-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .applied-tag {
            background: #667eea;
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .applied-tag .remove-tag {
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.3s ease;
        }

        .applied-tag .remove-tag:hover {
            opacity: 1;
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #e74c3c;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: 600;
        }

        .trigger-item.active {
            border-left-color: #2ecc71;
            background: linear-gradient(90deg, rgba(46, 204, 113, 0.1) 0%, transparent 100%);
        }

        .shortcut-item:hover,
        .tag-item:hover,
        .trigger-item:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .context-menu {
            position: absolute;
            background: white;
            border-radius: 8px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
            padding: 8px 0;
            min-width: 150px;
            z-index: 1000;
            display: none;
        }

        .context-menu-item {
            padding: 10px 15px;
            cursor: pointer;
            transition: background 0.2s ease;
            font-size: 14px;
            color: #2c3e50;
        }

        .context-menu-item:hover {
            background: #f8f9fa;
        }

        .context-menu-item i {
            margin-right: 8px;
            width: 16px;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .right-panel {
                width: 300px;
            }
        }

        @media (max-width: 992px) {
            .sidebar {
                width: 280px;
            }
            .right-panel {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .main-container {
                margin: 5px;
                border-radius: 15px;
            }
            .sidebar {
                width: 250px;
            }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
        }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <img src="https://emailbulkshoot.s3.ap-southeast-2.amazonaws.com/assests+for+Email+Automation/Techserve%404x.png" alt="Logo">
                    <h2>TechServe Chat</h2>
                </div>
                <div class="search-box">
                    <input type="text" placeholder="Search conversations...">
                    <i class="fas fa-search"></i>
                </div>
            </div>
            
            <div class="sidebar-tabs">
                <button class="tab-btn active" onclick="switchTab('inbox')">
                    <i class="fas fa-inbox"></i> Inbox
                </button>
                <button class="tab-btn" onclick="switchTab('contacts')">
                    <i class="fas fa-users"></i> Contacts
                </button>
            </div>
            
            <div class="sidebar-content">
                <!-- Inbox List -->
                <div id="inbox-tab" class="tab-content">
                    <div class="inbox-item active">
                        <div class="avatar">JD</div>
                        <div class="contact-info">
                            <div class="contact-name">John Doe</div>
                            <div class="contact-status">
                                <span class="status-dot status-online"></span>
                                Need help with billing...
                            </div>
                        </div>
                        <div class="unread-badge">3</div>
                    </div>
                    
                    <div class="inbox-item">
                        <div class="avatar">SM</div>
                        <div class="contact-info">
                            <div class="contact-name">Sarah Miller</div>
                            <div class="contact-status">
                                <span class="status-dot status-away"></span>
                                Product inquiry about...
                            </div>
                        </div>
                        <div class="unread-badge">1</div>
                    </div>
                    
                    <div class="inbox-item">
                        <div class="avatar">MJ</div>
                        <div class="contact-info">
                            <div class="contact-name">Mike Johnson</div>
                            <div class="contact-status">
                                <span class="status-dot status-offline"></span>
                                Technical support needed
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Contacts List -->
                <div id="contacts-tab" class="tab-content" style="display: none;">
                    <div class="contact-item">
                        <div class="avatar">AL</div>
                        <div class="contact-info">
                            <div class="contact-name">Alice Cooper</div>
                            <div class="contact-status">
                                <span class="status-dot status-online"></span>
                                Premium Customer
                            </div>
                        </div>
                    </div>
                    
                    <div class="contact-item">
                        <div class="avatar">BW</div>
                        <div class="contact-info">
                            <div class="contact-name">Bob Wilson</div>
                            <div class="contact-status">
                                <span class="status-dot status-away"></span>
                                Regular Customer
                            </div>
                        </div>
                    </div>
                    
                    <div class="contact-item">
                        <div class="avatar">CD</div>
                        <div class="contact-info">
                            <div class="contact-name">Carol Davis</div>
                            <div class="contact-status">
                                <span class="status-dot status-offline"></span>
                                New Lead
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Main Chat Area -->
        <div class="chat-container">
            <div class="chat-header">
                <div class="chat-user-info">
                    <div class="avatar">JD</div>
                    <div class="chat-user-details">
                        <h3>John Doe</h3>
                        <p><i class="fas fa-circle" style="color: #2ecc71; font-size: 8px;"></i> Online â€¢ Last seen 2 minutes ago</p>
                    </div>
                </div>
                <div class="chat-actions">
                    <button class="action-btn" title="Voice Call">
                        <i class="fas fa-phone"></i>
                    </button>
                    <button class="action-btn" title="Video Call">
                        <i class="fas fa-video"></i>
                    </button>
                    <button class="action-btn" title="More Options">
                        <i class="fas fa-ellipsis-v"></i>
                    </button>
                </div>
            </div>
            
            <div class="chat-messages" id="chat-messages">
                <div class="message received">
                    <div class="message-content">
                        <div class="message-text">Hi! I need help with my billing account. Can you please assist me?</div>
                        <div class="message-time">
                            <span>2:30 PM</span>
                        </div>
                    </div>
                </div>
                
                <div class="message sent">
                    <div class="message-content">
                        <div class="message-text">Hello John! I'd be happy to help you with your billing account. Could you please provide me with your account number?</div>
                        <div class="message-time">
                            <span>2:32 PM</span>
                            <i class="fas fa-check-double" style="color: #4a90e2;"></i>
                        </div>
                    </div>
                </div>
                
                <div class="message received">
                    <div class="message-content">
                        <div class="message-text">Sure! My account number is ACC-123456789. I'm having issues with the recent charge on my card.</div>
                        <div class="message-time">
                            <span>2:33 PM</span>
                        </div>
                    </div>
                </div>
                
                <div class="typing-indicator" id="typing-indicator">
                    <div class="typing-dots">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </div>
            </div>
            
            <div class="input-container">
                <div class="input-wrapper">
                    <div class="input-actions">
                        <button class="input-btn" title="Attach File">
                            <i class="fas fa-paperclip"></i>
                        </button>
                        <button class="input-btn" title="Add Emoji">
                            <i class="fas fa-smile"></i>
                        </button>
                        <button class="input-btn" title="Voice Message">
                            <i class="fas fa-microphone"></i>
                        </button>
                    </div>
                    <textarea id="message-input" placeholder="Type your message..." rows="1"></textarea>
                </div>
                <button class="send-btn" onclick="sendMessage()">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
        
        <!-- Right Panel -->
        <div class="right-panel">
            <div class="panel-tabs">
                <button class="panel-tab active" onclick="switchPanel('shortcuts')">
                    <i class="fas fa-bolt"></i> Shortcuts
                </button>
                <button class="panel-tab" onclick="switchPanel('tags')">
                    <i class="fas fa-tags"></i> Tags
                </button>
                <button class="panel-tab" onclick="switchPanel('triggers')">
                    <i class="fas fa-robot"></i> Triggers
                </button>
            </div>
            
            <div class="panel-content">
                <!-- Shortcuts Panel -->
                <div id="shortcuts-panel" class="panel-section active">
                    <div class="section-header">
                        <h3>Quick Shortcuts</h3>
                        <button class="add-item-btn" onclick="openModal('shortcut-modal')">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    
                    <div class="shortcut-item" onclick="insertShortcut('Hello! How can I assist you today?')">
                        <div class="shortcut-title">Welcome Message</div>
                        <div class="shortcut-text">Hello! How can I assist you today?</div>
                        <div class="shortcut-key">Ctrl + 1</div>
                    </div>
                    
                    <div class="shortcut-item" onclick="insertShortcut('Thank you for contacting us. Your issue has been escalated to our technical team.')">
                        <div class="shortcut-title">Escalation Notice</div>
                        <div class="shortcut-text">Thank you for contacting us. Your issue has been escalated...</div>
                        <div class="shortcut-key">Ctrl + 2</div>
                    </div>
                    
                    <div class="shortcut-item" onclick="insertShortcut('We appreciate your patience. Our team will get back to you within 24 hours.')">
                        <div class="shortcut-title">Follow-up Message</div>
                        <div class="shortcut-text">We appreciate your patience. Our team will get back...</div>
                        <div class="shortcut-key">Ctrl + 3</div>
                    </div>
                    
                    <div class="shortcut-item" onclick="insertShortcut('Is there anything else I can help you with today?')">
                        <div class="shortcut-title">Closing Question</div>
                        <div class="shortcut-text">Is there anything else I can help you with today?</div>
                        <div class="shortcut-key">Ctrl + 4</div>
                    </div>
                </div>
                
                <!-- Tags Panel -->
                <div id="tags-panel" class="panel-section">
                    <div class="section-header">
                        <h3>Conversation Tags</h3>
                        <button class="add-item-btn" onclick="openModal('tag-modal')">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    
                    <div class="tag-item">
                        <div class="tag-info">
                            <div class="tag-color" style="background: #e74c3c;"></div>
                            <span>Urgent</span>
                        </div>
                        <div class="tag-actions">
                            <button class="tag-btn" onclick="applyTag('urgent')">
                                <i class="fas fa-plus"></i>
                            </button>
                            <button class="tag-btn" onclick="editTag('urgent')">
                                <i class="fas fa-edit"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="tag-item">
                        <div class="tag-info">
                            <div class="tag-color" style="background: #f39c12;"></div>
                            <span>Billing</span>
                        </div>
                        <div class="tag-actions">
                            <button class="tag-btn" onclick="applyTag('billing')">
                                <i class="fas fa-plus"></i>
                            </button>
                            <button class="tag-btn" onclick="editTag('billing')">
                                <i class="fas fa-edit"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="tag-item">
                        <div class="tag-info">
                            <div class="tag-color" style="background: #2ecc71;"></div>
                            <span>Resolved</span>
                        </div>
                        <div class="tag-actions">
                            <button class="tag-btn" onclick="applyTag('resolved')">
                                <i class="fas fa-plus"></i>
                            </button>
                            <button class="tag-btn" onclick="editTag('resolved')">
                                <i class="fas fa-edit"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="tag-item">
                        <div class="tag-info">
                            <div class="tag-color" style="background: #3498db;"></div>
                            <span>Technical</span>
                        </div>
                        <div class="tag-actions">
                            <button class="tag-btn" onclick="applyTag('technical')">
                                <i class="fas fa-plus"></i>
                            </button>
                            <button class="tag-btn" onclick="editTag('technical')">
                                <i class="fas fa-edit"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="tag-item">
                        <div class="tag-info">
                            <div class="tag-color" style="background: #9b59b6;"></div>
                            <span>VIP Customer</span>
                        </div>
                        <div class="tag-actions">
                            <button class="tag-btn" onclick="applyTag('vip')">
                                <i class="fas fa-plus"></i>
                            </button>
                            <button class="tag-btn" onclick="editTag('vip')">
                                <i class="fas fa-edit"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Triggers Panel -->
                <div id="triggers-panel" class="panel-section">
                    <div class="section-header">
                        <h3>Auto Triggers</h3>
                        <button class="add-item-btn" onclick="openModal('trigger-modal')">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    
                    <div class="trigger-item">
                        <div class="trigger-header">
                            <div class="trigger-title">Welcome Message</div>
                            <div class="trigger-toggle" onclick="toggleTrigger(this)"></div>
                        </div>
                        <div class="trigger-condition">When: Visitor starts chat</div>
                        <div class="trigger-action">Send: "Welcome! How can I help you today?"</div>
                    </div>
                    
                    <div class="trigger-item">
                        <div class="trigger-header">
                            <div class="trigger-title">Away Message</div>
                            <div class="trigger-toggle" onclick="toggleTrigger(this)"></div>
                        </div>
                        <div class="trigger-condition">When: Agent is offline</div>
                        <div class="trigger-action">Send: "We're currently offline. Leave a message!"</div>
                    </div>
                    
                    <div class="trigger-item">
                        <div class="trigger-header">
                            <div class="trigger-title">Inactivity Alert</div>
                            <div class="trigger-toggle off" onclick="toggleTrigger(this)"></div>
                        </div>
                        <div class="trigger-condition">When: No response for 5 minutes</div>
                        <div class="trigger-action">Send: "Are you still there? Need any help?"</div>
                    </div>
                    
                    <div class="trigger-item">
                        <div class="trigger-header">
                            <div class="trigger-title">Escalation Request</div>
                            <div class="trigger-toggle" onclick="toggleTrigger(this)"></div>
                        </div>
                        <div class="trigger-condition">When: Keywords "manager", "supervisor"</div>
                        <div class="trigger-action">Notify: Escalate to supervisor</div>
                    </div>
                    
                    <div class="trigger-item">
                        <div class="trigger-header">
                            <div class="trigger-title">Satisfaction Survey</div>
                            <div class="trigger-toggle" onclick="toggleTrigger(this)"></div>
                        </div>
                        <div class="trigger-condition">When: Chat ends</div>
                        <div class="trigger-action">Send: Customer satisfaction survey</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Shortcut Modal -->
    <div id="shortcut-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Add New Shortcut</h3>
                <button class="close-btn" onclick="closeModal('shortcut-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="shortcut-form">
                <div class="form-group">
                    <label class="form-label">Shortcut Title</label>
                    <input type="text" class="form-input" id="shortcut-title" placeholder="Enter shortcut title">
                </div>
                <div class="form-group">
                    <label class="form-label">Message Text</label>
                    <textarea class="form-textarea" id="shortcut-message" placeholder="Enter your message"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Keyboard Shortcut</label>
                    <input type="text" class="form-input" id="shortcut-key" placeholder="e.g., Ctrl + 5">
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="closeModal('shortcut-modal')">Cancel</button>
                    <button type="submit" class="btn-primary">Save Shortcut</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Tag Modal -->
    <div id="tag-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Add New Tag</h3>
                <button class="close-btn" onclick="closeModal('tag-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="tag-form">
                <div class="form-group">
                    <label class="form-label">Tag Name</label>
                    <input type="text" class="form-input" id="tag-name" placeholder="Enter tag name">
                </div>
                <div class="form-group">
                    <label class="form-label">Tag Color</label>
                    <select class="form-select" id="tag-color">
                        <option value="#e74c3c">Red</option>
                        <option value="#f39c12">Orange</option>
                        <option value="#f1c40f">Yellow</option>
                        <option value="#2ecc71">Green</option>
                        <option value="#3498db">Blue</option>
                        <option value="#9b59b6">Purple</option>
                        <option value="#1abc9c">Teal</option>
                        <option value="#34495e">Dark Gray</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea class="form-textarea" id="tag-description" placeholder="Optional description"></textarea>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="closeModal('tag-modal')">Cancel</button>
                    <button type="submit" class="btn-primary">Create Tag</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Trigger Modal -->
    <div id="trigger-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Create New Trigger</h3>
                <button class="close-btn" onclick="closeModal('trigger-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="trigger-form">
                <div class="form-group">
                    <label class="form-label">Trigger Name</label>
                    <input type="text" class="form-input" id="trigger-name" placeholder="Enter trigger name">
                </div>
                <div class="form-group">
                    <label class="form-label">Trigger Condition</label>
                    <select class="form-select" id="trigger-condition">
                        <option value="chat_start">When chat starts</option>
                        <option value="agent_offline">When agent is offline</option>
                        <option value="inactivity">After period of inactivity</option>
                        <option value="keywords">When specific keywords are mentioned</option>
                        <option value="chat_end">When chat ends</option>
                        <option value="page_visit">When visitor visits specific page</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Action Type</label>
                    <select class="form-select" id="trigger-action-type">
                        <option value="send_message">Send Message</option>
                        <option value="assign_tag">Assign Tag</option>
                        <option value="notify_agent">Notify Agent</option>
                        <option value="transfer_chat">Transfer Chat</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Action Content</label>
                    <textarea class="form-textarea" id="trigger-action-content" placeholder="Enter message or action details"></textarea>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="closeModal('trigger-modal')">Cancel</button>
                    <button type="submit" class="btn-primary">Create Trigger</button>
                </div>
            </form>
        </div>
    </div>


    <script>
        // Global variables
        // Global variables
// Define all functions immediately in global scope
// This ensures they're available even before DOMContentLoaded

// Global variables
var currentChat = 'JD';
var currentPanel = 'shortcuts';
var appliedTags = [];

// Define functions directly in global scope
function switchTab(tab) {
    // Remove active class from all tabs and content
    document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(content => content.style.display = 'none');
    
    // Add active class to clicked tab
    event.target.classList.add('active');
    var tabElement = document.getElementById(tab + '-tab');
    if (tabElement) {
        tabElement.style.display = 'block';
    }
}

function switchPanel(panel) {
    // Remove active class from all panel tabs and sections
    document.querySelectorAll('.panel-tab').forEach(tab => tab.classList.remove('active'));
    document.querySelectorAll('.panel-section').forEach(section => section.classList.remove('active'));
    
    // Add active class to clicked panel
    event.target.classList.add('active');
    var panelElement = document.getElementById(panel + '-panel');
    if (panelElement) {
        panelElement.classList.add('active');
    }
    currentPanel = panel;
}

function sendMessage() {
    var messageInput = document.getElementById('message-input');
    if (!messageInput) return;
    
    var messageText = messageInput.value.trim();
    if (messageText === '') return;
    
    // Add message to chat
    addMessageToChat(messageText, true);
    
    // Clear input
    messageInput.value = '';
    autoResizeTextarea();
    
    // Show typing indicator
    showTypingIndicator();
    
    // Simulate AI response
    setTimeout(function() {
        hideTypingIndicator();
        var responses = [
            "I understand your concern. Let me help you with that.",
            "Thank you for providing that information. I'll look into this right away.",
            "I've noted your request and will process it immediately.",
            "That's a great question! Let me provide you with the details."
        ];
        var randomResponse = responses[Math.floor(Math.random() * responses.length)];
        addMessageToChat(randomResponse, false);
    }, 1500);
}

function insertShortcut(text) {
    var messageInput = document.getElementById('message-input');
    if (messageInput) {
        messageInput.value = text;
        messageInput.focus();
        autoResizeTextarea();
    }
}

function applyTag(tagName) {
    if (appliedTags.indexOf(tagName) === -1) {
        appliedTags.push(tagName);
        updateAppliedTags();
        showNotification('Tag "' + tagName + '" applied to conversation');
    }
}

function removeTag(tagName) {
    appliedTags = appliedTags.filter(function(tag) { return tag !== tagName; });
    updateAppliedTags();
    showNotification('Tag "' + tagName + '" removed from conversation');
}

function toggleTrigger(element) {
    element.classList.toggle('off');
    var isActive = !element.classList.contains('off');
    var triggerItem = element.closest('.trigger-item');
    
    if (isActive) {
        triggerItem.classList.add('active');
        showNotification('Trigger activated');
    } else {
        triggerItem.classList.remove('active');
        showNotification('Trigger deactivated');
    }
}

function openModal(modalId) {
    var modal = document.getElementById(modalId);
    if (modal) {
        modal.style.display = 'block';
    }
}

function closeModal(modalId) {
    var modal = document.getElementById(modalId);
    if (modal) {
        modal.style.display = 'none';
        var form = modal.querySelector('form');
        if (form) form.reset();
    }
}

function editTag(tagName) {
    showNotification('Edit functionality coming soon!');
}

function deleteShortcut(element) {
    var shortcutItem = element.closest('.shortcut-item');
    if (confirm('Are you sure you want to delete this shortcut?')) {
        shortcutItem.remove();
        showNotification('Shortcut deleted successfully!');
    }
}

function deleteTrigger(element) {
    var triggerItem = element.closest('.trigger-item');
    if (confirm('Are you sure you want to delete this trigger?')) {
        triggerItem.remove();
        showNotification('Trigger deleted successfully!');
    }
}

// Helper functions
function addMessageToChat(message, isSent) {
    var chatMessages = document.getElementById('chat-messages');
    if (!chatMessages) return;
    
    var messageDiv = document.createElement('div');
    messageDiv.className = 'message ' + (isSent ? 'sent' : 'received');
    
    var currentTime = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
    
    messageDiv.innerHTML = 
        '<div class="message-content">' +
            '<div class="message-text">' + message + '</div>' +
            '<div class="message-time">' +
                '<span>' + currentTime + '</span>' +
                (isSent ? '<i class="fas fa-check-double" style="color: #4a90e2;"></i>' : '') +
            '</div>' +
        '</div>';
    
    chatMessages.appendChild(messageDiv);
    chatMessages.scrollTop = chatMessages.scrollHeight;
}

function showTypingIndicator() {
    var typingIndicator = document.getElementById('typing-indicator');
    if (typingIndicator) {
        typingIndicator.style.display = 'block';
        var chatMessages = document.getElementById('chat-messages');
        if (chatMessages) {
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
    }
}

function hideTypingIndicator() {
    var typingIndicator = document.getElementById('typing-indicator');
    if (typingIndicator) {
        typingIndicator.style.display = 'none';
    }
}

function updateAppliedTags() {
    console.log('Applied tags:', appliedTags);
}

function autoResizeTextarea() {
    var textarea = document.getElementById('message-input');
    if (textarea) {
        textarea.style.height = 'auto';
        textarea.style.height = Math.min(textarea.scrollHeight, 120) + 'px';
    }
}

function showNotification(message) {
    var notification = document.createElement('div');
    notification.className = 'notification';
    notification.textContent = message;
    notification.style.cssText = 
        'position: fixed;' +
        'top: 20px;' +
        'right: 20px;' +
        'background: #4a90e2;' +
        'color: white;' +
        'padding: 12px 20px;' +
        'border-radius: 6px;' +
        'box-shadow: 0 4px 12px rgba(0,0,0,0.15);' +
        'z-index: 1000;' +
        'font-size: 14px;' +
        'opacity: 0;' +
        'transform: translateY(-20px);' +
        'transition: all 0.3s ease;';
    
    document.body.appendChild(notification);
    
    setTimeout(function() {
        notification.style.opacity = '1';
        notification.style.transform = 'translateY(0)';
    }, 10);
    
    setTimeout(function() {
        notification.style.opacity = '0';
        notification.style.transform = 'translateY(-20px)';
        setTimeout(function() {
            if (notification.parentNode) {
                notification.parentNode.removeChild(notification);
            }
        }, 300);
    }, 3000);
}

// Form handlers and other functions
function handleShortcutSubmit(e) {
    e.preventDefault();
    var title = document.getElementById('shortcut-title').value;
    var message = document.getElementById('shortcut-message').value;
    var key = document.getElementById('shortcut-key').value;
    
    if (title && message) {
        addShortcutToPanel(title, message, key);
        closeModal('shortcut-modal');
        showNotification('Shortcut created successfully!');
    }
}

function handleTagSubmit(e) {
    e.preventDefault();
    var name = document.getElementById('tag-name').value;
    var color = document.getElementById('tag-color').value;
    var description = document.getElementById('tag-description').value;
    
    if (name) {
        addTagToPanel(name, color, description);
        closeModal('tag-modal');
        showNotification('Tag created successfully!');
    }
}

function handleTriggerSubmit(e) {
    e.preventDefault();
    var name = document.getElementById('trigger-name').value;
    var condition = document.getElementById('trigger-condition').value;
    var actionType = document.getElementById('trigger-action-type').value;
    var actionContent = document.getElementById('trigger-action-content').value;
    
    if (name && condition && actionContent) {
        addTriggerToPanel(name, condition, actionType, actionContent);
        closeModal('trigger-modal');
        showNotification('Trigger created successfully!');
    }
}

function addShortcutToPanel(title, message, key) {
    var shortcutsPanel = document.getElementById('shortcuts-panel');
    if (shortcutsPanel) {
        var shortcutDiv = document.createElement('div');
        shortcutDiv.className = 'shortcut-item';
        shortcutDiv.onclick = function() { insertShortcut(message); };
        
        shortcutDiv.innerHTML = 
            '<div class="shortcut-title">' + title + '</div>' +
            '<div class="shortcut-text">' + (message.length > 50 ? message.substring(0, 50) + '...' : message) + '</div>' +
            (key ? '<div class="shortcut-key">' + key + '</div>' : '');
        
        shortcutsPanel.appendChild(shortcutDiv);
    }
}

function addTagToPanel(name, color, description) {
    var tagsPanel = document.getElementById('tags-panel');
    if (tagsPanel) {
        var tagDiv = document.createElement('div');
        tagDiv.className = 'tag-item';
        
        tagDiv.innerHTML = 
            '<div class="tag-info">' +
                '<div class="tag-color" style="background: ' + color + ';"></div>' +
                '<span>' + name + '</span>' +
            '</div>' +
            '<div class="tag-actions">' +
                '<button class="tag-btn" onclick="applyTag(\'' + name + '\')">' +
                    '<i class="fas fa-plus"></i>' +
                '</button>' +
                '<button class="tag-btn" onclick="editTag(\'' + name + '\')">' +
                    '<i class="fas fa-edit"></i>' +
                '</button>' +
            '</div>';
        
        tagsPanel.appendChild(tagDiv);
    }
}

function addTriggerToPanel(name, condition, actionType, actionContent) {
    var triggersPanel = document.getElementById('triggers-panel');
    if (triggersPanel) {
        var triggerDiv = document.createElement('div');
        triggerDiv.className = 'trigger-item';
        
        var conditionText = getConditionText(condition);
        var actionText = getActionText(actionType, actionContent);
        
        triggerDiv.innerHTML = 
            '<div class="trigger-header">' +
                '<div class="trigger-title">' + name + '</div>' +
                '<div class="trigger-toggle" onclick="toggleTrigger(this)"></div>' +
            '</div>' +
            '<div class="trigger-condition">' + conditionText + '</div>' +
            '<div class="trigger-action">' + actionText + '</div>';
        
        triggersPanel.appendChild(triggerDiv);
    }
}

function getConditionText(condition) {
    var conditions = {
        'chat_start': 'When: Chat starts',
        'agent_offline': 'When: Agent is offline',
        'inactivity': 'When: Period of inactivity',
        'keywords': 'When: Specific keywords mentioned',
        'chat_end': 'When: Chat ends',
        'page_visit': 'When: Visitor visits specific page'
    };
    return conditions[condition] || 'When: Custom condition';
}

function getActionText(actionType, content) {
    var actionPrefixes = {
        'send_message': 'Send:',
        'assign_tag': 'Tag:',
        'notify_agent': 'Notify:',
        'transfer_chat': 'Transfer:'
    };
    var prefix = actionPrefixes[actionType] || 'Action:';
    return prefix + ' ' + (content.length > 40 ? content.substring(0, 40) + '...' : content);
}

function handleMessageKeydown(e) {
    if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        sendMessage();
    }
}

function initializeEventListeners() {
    var shortcutForm = document.getElementById('shortcut-form');
    if (shortcutForm) {
        shortcutForm.addEventListener('submit', handleShortcutSubmit);
    }
    
    var tagForm = document.getElementById('tag-form');
    if (tagForm) {
        tagForm.addEventListener('submit', handleTagSubmit);
    }
    
    var triggerForm = document.getElementById('trigger-form');
    if (triggerForm) {
        triggerForm.addEventListener('submit', handleTriggerSubmit);
    }
    
    var messageInput = document.getElementById('message-input');
    if (messageInput) {
        messageInput.addEventListener('input', autoResizeTextarea);
        messageInput.addEventListener('keydown', handleMessageKeydown);
    }
}

function loadShortcutKeys() {
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey) {
            switch(e.key) {
                case '1':
                    e.preventDefault();
                    insertShortcut('Hello! How can I help you today?');
                    break;
                case '2':
                    e.preventDefault();
                    insertShortcut('Thank you for contacting us. I\'ll be happy to assist you.');
                    break;
                case '3':
                    e.preventDefault();
                    insertShortcut('Please hold on while I check that information for you.');
                    break;
                case '4':
                    e.preventDefault();
                    insertShortcut('Is there anything else I can help you with?');
                    break;
                case '5':
                    e.preventDefault();
                    insertShortcut('Have a great day!');
                    break;
            }
        }
    });
}

// Initialize when DOM is ready
document.addEventListener('DOMContentLoaded', function() {
    initializeEventListeners();
    loadShortcutKeys();
    autoResizeTextarea();
});

// Close modals when clicking outside
window.addEventListener('click', function(e) {
    if (e.target.classList.contains('modal')) {
        e.target.style.display = 'none';
    }
});

// ESC key to close modals
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        var openModal = document.querySelector('.modal[style*="block"]');
        if (openModal) {
            openModal.style.display = 'none';
        }
    }
});