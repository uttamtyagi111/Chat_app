<!-- Chat bubble container with notification badge -->
<div id="chat-bubble-container">
    ${attentionGrabberHTML}
    <div id="chat-bubble">
        <img id="chat-bubble-logo" src="${WIDGET_CONFIG.logoUrl}" alt="Chat Logo" />
    </div>
    <div class="notification-badge">1</div>
</div>

<div id="chat-window">
    <div id="chat-header">
        ${WIDGET_CONFIG.chatTitle}
        <!-- History controls added here -->
        <button class="history-toggle">⚙️</button>
        <div class="history-controls">
            <span class="history-label">Load history:</span>
            <select class="history-select">
                <option value="5">Last 5 messages</option>
                <option value="10">Last 10 messages</option>
                <option value="full" selected>Full history</option>
            </select>
        </div>
        <span id="mute-toggle">🔊</span>
    </div>
    <div id="chat-content">
        <div id="chat-messages">
            <img id="chat-messages-logo" src="${WIDGET_CONFIG.logoUrl}" alt="Chat Logo"
                onload="console.log('Logo loaded')" onerror="console.error('Failed to load logo')" />
        </div>
        <div id="chat-form">
            <div class="form-group">
                <label for="form-name">Name:</label>
                <input id="form-name" type="text" placeholder="Enter your name" required />
            </div>
            <div class="form-group">
                <label for="form-email">Email:</label>
                <input id="form-email" type="email" placeholder="Enter your email" required />
            </div>
            <button id="form-submit" class="submit-btn">Submit</button>
        </div>
        <div id="file-preview-container">
            <div id="file-preview-box">
                <span id="file-preview-name"></span>
                <span id="remove-file">✕</span>
            </div>
        </div>
        <div id="chat-footer">
            <input id="chat-input" type="text" placeholder="${WIDGET_CONFIG.placeholder}" />
            <label id="attach-button" for="file-input">📎</label>
            <input id="file-input" type="file" />
            <span id="emoji-button">😊</span>
            <button id="send-btn">Send</button>
        </div>
    </div>
    <div id="emoji-picker"></div>
</div>

<!-- Loading indicator template (hidden by default) -->
<div id="loading-template" style="display: none;">
    <div class="loading-indicator">
        Loading chat history...
    </div>
</div>

<!-- Suggested replies template (hidden by default) -->
<div id="suggested-replies-template" style="display: none;">
    <div class="suggested-replies">
        <!-- Replies will be added here dynamically -->
    </div>
</div>